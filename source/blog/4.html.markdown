---
title: 　（アクセシビリティも考えて）画像の下にできる余白をなくす
date: 2011-12-09
tags: web
---

会社で教わったので備忘録として。

画像の下に余白ができてしまう現象については、様々なサイトで対処法が解説されています。  
しかし、それぞれに問題点があったりなかったりするので、今回は考えうる限りでベストな方法を紹介したいと思います。


### そもそもなんで余白ができるの

![](/images/blog/20111209_2.jpg)

ブロックレベル要素に内包されるimgタグは、下端がテキストのベースラインに揃えられます。アルファベットには、「g」や「j」のようにベースラインを超えるものが存在するため、多くの文字は下端に余白を持つことになります。HTMLでは、imgタグもベースラインに揃えられる仕様になっているため、同じように余白が空いてしまうのですね。

### 行内の垂直位置はvertical-alignプロパティで指定可能

![](/images/blog/20111209_2_2.jpg)

そこで登場するのがvertical-alignプロパティ。これはインライン要素の行内での垂直位置を指定するためのプロパティです。これさえわかってしまえば、あとは簡単。imgタグの親要素に以下の指定をすることで、あっというまに余白がなくなります。

    hoge{
        vertical-align:text-bottom;
    }

やったー消えたよー

### ところがどっこい

![](/images/blog/20111209_4.jpg)

実は、この方法だけでは解決できない問題があります。試しにフォントサイズを大きくしてしましょう。今度は画像の上に余白が空いてしまいました。

### なんでやねん

imgタグが「行」の中に収まっているということは、前述の解説でおわかりいただけたかと思います。当たり前の話ですが、文字が大きくなれば、その分だけ行の高さも大きくなります（※1）。でも、文字が大きくなったからといって、画像は大きくならないので、行の高さだけが増えてしまい、前述のように余白が空いてしまうのです。

<small>※1 line-heightに単位を指定をしている場合はこの限りでありません</small>

### 行の高さはline-heightプロパティで指定可能

![](/images/blog/20111209_3_2.jpg)

じゃあ行の高さをなくせばいいんじゃね？ということで、行の高さを指定するline-heightプロパティを、前述のcssに追記します。

    hoge{
        vertical-align:text-bottom;
        line-height:0;
    }

やったー消えたよー

### ところがどっこい part2

これで解決したかのように思われますが、実はもう1つだけ落とし穴がありました。

### 画像が表示されない場合に文字が読めなくなる

![](/images/blog/20111209_5.jpg)

なんらかの原因で画像が表示されなかったり、そもそもユーザー側で画像を表示しない設定にしている場合は、imgタグで指定したalt文が表示されるようになります。このときのalt文は、imgタグに指定されているcssが適用されるので、先ほどの指定では行が重なってしまい、文字が読めなくなってしまいます。イレギュラーなケースではありますが、これはアクセシビリティ的によろしくない。というわけで、前置きが長くなりましたが、今回提案するベストな解決方法は以下の通りです。

### imgタグにdisplay:block;を指定する

![](/images/blog/20111209_3.jpg)

そもそもimgタグが行の中に収まってしまうのは、imgタグがインライン要素であるためです。であれば、imgタグをブロックレベル要素にしてしまいましょう。下記の指定で、文字が大きくなっても余白ができず、画像が非表示になってもalt文がきちんと表示されるようになります。

    hoge img{
        display:block;
    }

### あとがき
アクセシビリティはユーザビリティと違って目に見えないものなので、考えるのがとても大変ですよね。色々な事例に触れて、少しずつノウハウを身に付けていきたいと思います。